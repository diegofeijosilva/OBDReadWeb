<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">
<f:view locale="#{userSettingsMB.language}" contentType="text/html">
	<h:head>	
		<link rel="shortcut icon" type="image/x-icon" href="#{resource['image/favicon.ico']}" />
		<title>#{msg['label.nome-sistema']}</title>
	</h:head>
	<h:body>
		<h:outputScript name="applib.js" library="js" />
		<h:outputScript name="util.js" library="js" />

		<h:outputStylesheet name="default.css" library="css" />
		
		<p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();" />
			
		<p:dialog modal="true" widgetVar="statusDialog" header="Processando, aguarde..." draggable="false" closable="false" width="250">
			<p:graphicImage name="ajaxloadingbar.gif" library="image" />
		</p:dialog>

		<p:layout fullPage="true" gutter="0" widgetVar="layout_widget">
			<p:layoutUnit position="north" styleClass="boxCabecalhoLayout"
				size="60" spacing="0" resizable="false" closable="false" gutter="0"
				style="overflow:hidden;">
				<div id="logo"
					style="display: inline-block; width: 170px; padding-left: 16px;">
					<p:graphicImage name="HeaderLogo.png" library="image"
						title="#{msg['label.nome-sistema']}" />
				</div>
				<div id="user"
					style="display: inline-block; vertical-align: bottom;">
					<h:panelGrid columns="1" styleClass="ui-widget"
						rendered="#{sessionMB.logged}">
						<h:outputLabel
							value="#{msg['label.organizacao']}: #{sessionMB.user.properties['organizacao']} - #{sessionMB.user.properties['setor']}" />
						<h:outputLabel
							value="#{msg['label.usuario']}: #{sessionMB.user.nome} - #{sessionMB.user.id}" />
						<!-- <p:growl showDetail="true" globalOnly="true" autoUpdate="true" showSummary="false" sticky="true" widgetVar="" life="3000" /> -->
					</h:panelGrid>
				</div>

				<h:panelGrid columns="3" rendered="#{sessionMB.logged}"
					style="display: inline-block; position: absolute; right: 15px; top: 10px; vertical-align: middle;">
					<p:outputLabel value="DESENVOLVIMENTO"
						rendered="#{detranWebUtil.ambienteDesenvolvimento}"
						style="font-weight:bold; color:white; background-color:red" />
					<p:outputLabel value="HOMOLOGAÇÃO"
						rendered="#{detranWebUtil.ambienteHomologacao}"
						style="font-weight:bold; color:white; background-color:blue" />
					<p:outputLabel value="TESTE"
						rendered="#{detranWebUtil.ambienteTeste}"
						style="font-weight:bold; color:white; background-color:green" />
					<p:outputLabel value="TREINAMENTO"
						rendered="#{detranWebUtil.ambienteTreinamento}"
						style="font-weight:bold; color:black; background-color:orange" />

					<h:form>
						<p:commandLink id="alteraSenha"
							onclick="senha.show(); return  false;" style="margin-right:5px;"
							ajax="false" styleClass="bt_alt_senha_detran" />
						<p:commandLink id="logout" action="#{logonFormMB.logoff()}"
							style="margin-right:5px;" ajax="false"
							styleClass="bt_logout_detran" />
					</h:form>

				</h:panelGrid>
			</p:layoutUnit>
			<p:layoutUnit position="west" header="Menu" resizable="true"
				closable="false" collapsible="true" size="166" gutter="0"
				rendered="#{sessionMB.logged}">
				<h:form>
					<p:menu>
						<ui:include src="/WEB-INF/templates/menu.xhtml" />
					</p:menu>
					<div id="icons"
						style="position: absolute; left: 15px; bottom: 40px; text-align: center;">
						<p:graphicImage name="logoDetran.png" library="image"
							title="Detran" />
						<br />
						<br />
						<p:graphicImage name="desvProcergs.png" library="image"
							title="Desenvolvido pela Procergs" />
					</div>
				</h:form>
			</p:layoutUnit>
			<p:layoutUnit position="center" gutter="0">
				<ui:insert name="body" />
			</p:layoutUnit>

			<p:dialog widgetVar="senha" modal="true" width="400"
				header="Alterar senha" resizable="false" appendToBody="true"
				closable="false">
				<p:outputPanel styleClass="boxBotoes">
					<p:toolbar>
						<p:toolbarGroup align="left">
							<h:form>
								<p:commandButton value="#{msg['label.back']}"
									icon="ui-icon-close" onclick="senha.hide();" immediate="true"
									type="button" />
							</h:form>
						</p:toolbarGroup>
					</p:toolbar>
				</p:outputPanel>
				<p:outputPanel styleClass="fl">
					<ui:include src="/senha-form.xhtml" />
				</p:outputPanel>
			</p:dialog>
			
			<script>
				$(document).ready(function() {
				layout_widget.layout.west.options.enableCursorHotkey = false;
				});
			</script>
		</p:layout>
	</h:body>
</f:view>
</html>